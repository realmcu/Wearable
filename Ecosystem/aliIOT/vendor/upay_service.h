/**
*****************************************************************************************
*     Copyright(c) 2017, Realtek Semiconductor Corporation. All rights reserved.
*****************************************************************************************
  * @file     simple_ble_service.h
  * @brief    Demonstration of how to implement a self-definition service.
  * @details  Demonstration of different kinds of service interfaces.
  * @author
  * @date
  * @version
  * *************************************************************************************
  */

/* Define to prevent recursive inclusion */
#ifndef _UPAY_SERVICE_CONFIG_H_
#define _UPAY_SERVICE_CONFIG_H_

#ifdef __cplusplus
extern "C"  {
#endif      /* __cplusplus */

/* Add Includes here */
#include <profile_server.h>

/* upay service uuid */
#define GATT_UUID_UPAY_SERVICE        0x3802
#define GATT_UPAY_CHARACTERISTIC      0x4a02
/*attribut index*/
#define INDEX_UPAY_WRITE                  0x02
#define INDEX_UPAY_READ                   0x02
#define INDEX_UPAY_CHAR_CCCD              0x03

#define UPAY_NOTIFY_INDICATE_ENABLE             1
#define UPAY_NOTIFY_INDICATE_DISABLE            2

#define UPAY_READ                                  1
#define UPAY_WRITE                                  1
typedef struct
{
    uint8_t opcode;
    T_WRITE_TYPE write_type;
    uint16_t len;
    uint8_t *p_value;
} TUPAY_WRITE_MSG;

typedef union _T_ALI_UPSTREAM_MSG_DATA
{
    uint8_t notification_indification_index;
    uint8_t read_value_index;
    TUPAY_WRITE_MSG write;
} TUPAY_UPSTREAM_MSG_DATA;

typedef struct
{
    uint8_t                 conn_id;
    T_SERVICE_CALLBACK_TYPE msg_type;
    TUPAY_UPSTREAM_MSG_DATA msg_data;
} TUPAYS_CALLBACK_DATA;

/**
  * @brief Add upay service to the BLE stack database.
  *
  * @param[in]   p_func  Callback when service attribute was read, write or cccd update.
  * @return Service id generated by the BLE stack: @ref T_SERVER_ID.
  * @retval 0xFF Operation failure.
  * @retval others Service id assigned by stack.
  *
  */
T_SERVER_ID upays_add_service(void *p_func);


#ifdef __cplusplus
}
#endif

#endif /* _UPAY_SERVICE_CONFIG_H_ */
